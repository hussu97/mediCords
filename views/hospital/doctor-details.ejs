<% include ./partials/header %>
<!-- header area start -->

<div class="header-area header-bottom">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-9  d-none d-lg-block">
                <div class="horizontal-menu">
                    <nav>
                        <ul id="nav_menu">
                            <li>
                                <a href="/hospital/<%=hospital.id%>/profile"><i
                                        class="ti-dashboard"></i><span>Profile</span></a>
                            </li>
                            <li class="active">
                                <a href="/hospital/<%=hospital.id%>/doctors"><i
                                        class="ti-layout-sidebar-left"></i><span>Doctors</span></a>
                            </li>
                            <li>
                                <a href="/hospital/<%=hospital.id%>/patients"><i
                                        class="ti-notepad"></i><span>Patients</span></a>
                            </li>
                            <li>
                                <% include ./partials/add-patient-modal %>
                                <% include ./partials/search-bar %>
                                <!-- mobile_menu -->
                                <div class="col-12 d-block d-lg-none">
                                    <div id="mobile_menu"></div>
                                </div>
                </div>
            </div>
            <hr class="horizontal-menu-hr">
            </hr>
            <div class="container">
                <div class="page-title-area">
                    <div class="row align-items-center">
                        <div class="col-sm-6">
                            <div class="breadcrumbs-area clearfix">
                                <h4 class="page-title pull-left">Dashboard</h4>
                                <ul class="breadcrumbs pull-left">
                                    <li><a href="/hospital/<%=hospital.id%>/">Home</a></li>
                                    <li><a href="/hospital/<%=hospital.id%>/doctors">Doctors</a></li>
                                    <li><span><%= doctor.firstName%> <%=doctor.lastName%></span></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- header area end -->
        <!-- header area end -->
        <!-- page title area end -->
        <div class="main-content-inner">
            <div class="container">
                <div class="row">
                    <script>
                        changeBtn = (idName, className) => {
                            var buttonVal = $(className).text();
                            if (buttonVal === 'Change') {
                                $(className).text('Save');
                                $(idName).prop('disabled', false);
                            } else {
                                $(className).text('Change');
                                $(idName).prop('disabled', true);
                            }
                        }
                    </script>
                    <div class="col-lg-5">
                        <form class="card" method="POST"
                            action="/hospital/<%=hospital.id%>/doctors/<%=doctor.id%>?_method=PUT">
                            <div class="card-header"></div>
                            <div class="card-body">
                                <h3 class="card-title">Details &nbsp;&nbsp;
                                    <% if(hospital.isVerified){ %>
                                    <a href="javascript:void(0)" class="btn btn-outline-success btn-sm">
                                        <span class="fa fa-check"></span> Verified
                                    </a>
                                    <% } else { %>
                                    <a href="javascript:void(0)" class="btn btn-outline-danger btn-sm">
                                        <span class="fa fa-times"></span> Not Verified
                                    </a>
                                    <% } %>
                                </h3>
                                <div class="row">
                                    <div class="col-sm-6 col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Doctor ID</label>
                                            <input type="text" name="doctor[id]" class="form-control" disabled=""
                                                placeholder="doctorID" value="<%=doctor.id%>">
                                        </div>
                                    </div>
                                    <script>
                                        changeBtn = (idName, className) => {
                                            var buttonVal = $(className).text();
                                            if (buttonVal === 'Change') {
                                                $(className).text('Save');
                                                $(idName).prop('disabled', false);
                                            } else {
                                                $(className).text('Change');
                                                $(idName).prop('disabled', true);
                                            }
                                        }
                                    </script>
                                    <div class="col-sm-6 col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">License ID</label>
                                            <a href="javascript:void(0);" class="change-id-btn pull-right"
                                                onclick="changeBtn('#id','.change-id-btn')">Change</a>
                                            <input type="text" id="id" class="form-control"
                                                placeholder="Identification Number" name="doctor[identificationNumber]"
                                                disabled="" value="<%= doctor.identificationNumber %>">
                                        </div>
                                    </div>
                                    <div class="col-sm-6 col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Expiry</label>
                                            <a href="javascript:void(0);" class="change-expiry-btn pull-right"
                                                onclick="changeBtn('#expiry','.change-expiry-btn')">Change</a>
                                            <input type="text" id="expiry" class="form-control" placeholder="Expiry"
                                                name="doctor[expiry]" value="<%= doctor.expiry %>" disabled="">
                                        </div>
                                    </div>
                                    <div class="col-sm-6 col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Place of Issue</label>
                                            <a href="javascript:void(0);" class="change-country-btn pull-right"
                                                onclick="changeBtn('#country','.change-country-btn')">Change</a>
                                            <input type="text" id="country" class="form-control" name="doctor[country]"
                                                placeholder="City" value="<%= doctor.country %>" disabled="">
                                        </div>
                                    </div>
                                    <div class="col-sm-6 col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">First Name</label>
                                            <input type="text" class="form-control" name="doctor[firstName]"
                                                placeholder="Company" value="<%= doctor.firstName %>" disabled="">
                                        </div>
                                    </div>
                                    <div class="col-sm-6 col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Last Name</label>
                                            <input type="text" class="form-control" name="doctor[lastName]"
                                                placeholder="Company" value="<%= doctor.lastName %>" disabled="">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer">
                                <div class="row">
                                    <div class="col-md-6 mt-2">
                                        <button type="submit" class="btn btn-primary btn-block">Update Doctor
                                            Details</button>
                                    </div>
                        </form>
                        <div class="col-md-6 mt-2">
                            <form method="POST"
                                action="/hospital/<%=hospital.id%>/doctors/<%=doctor.id%>?_method=DELETE">
                                <button type="submit" class="btn btn-danger btn-block">Remove Doctor</button>
                            </form>
                        </div>
                    </div>
                </div>

            </div>
            <!-- testimonial area end -->
            <!-- data table start -->
            <div class="col-lg-7">
                <div class="card">
                    <div class="card-header"></div>
                    <div class="card-body">
                        <h3 class="card-title">Patients</h3>
                        <div class="data-tables">
                            <table id="dataTable" class="text-center table-hover">
                                <thead class="bg-light text-capitalize">
                                    <tr>
                                        <th>ID Number</th>
                                        <th>First Name</th>
                                        <th>Last Name</th>
                                        <th>DOB</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% doctor.patients.forEach((pa)=> { %>
                                    <tr>
                                        <th scope="row"><%= pa.identificationNumber %></th>
                                        <td><%= pa.firstName %></td>
                                        <td><%= pa.lastName %></td>
                                        <td><%= pa.dob %></td>
                                        <td>
                                            <a href="/hospital/<%=hospital.id%>/patient/<%=pa.id%>">More
                                                Info</a>
                                        </td>
                                    </tr>
                                    <%}); %>
                                </tbody>
                                <% if(doctor.patients.length === 0) {%>
                                <p>No patients have been registered</p>
                                <br />
                                <% }; %>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <!-- data table end -->
        </div>
    </div>
</div>
<% include ./partials/footer %>
</div>
<!-- main wrapper start -->
<% include ./partials/offset %>
<% include ./partials/scripts %>
</body>

</html>